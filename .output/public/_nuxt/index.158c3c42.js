import{e as M,O as E,i as B,M as F,P as O,w as b,o as c,l as d,F as R,E as S,p as T,u as f,Q as W,A as _,t as $,R as A}from"./entry.c7af61af.js";const L=["data-index"],U=M({__name:"masonry-wall",props:{columnWidth:{default:400},items:null,gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0},scrollContainer:{default:null}},emits:["redraw","redrawSkip"],setup(n,{emit:p}){const z=n,{columnWidth:y,items:o,gap:s,rtl:g,ssrColumns:w,scrollContainer:h}=E(z),r=B([]),i=B();function x(){const e=Math.floor((i.value.getBoundingClientRect().width+s.value)/(y.value+s.value));return e>0?e:1}function k(e){return[...new Array(e)].map(()=>[])}if(w.value>0){const e=k(w.value);o.value.forEach((l,t)=>e[t%w.value].push(t)),r.value=e}async function C(e){if(e>=o.value.length)return;await A();const l=[...i.value.children];g.value&&l.reverse();const t=l.reduce((u,a)=>a.getBoundingClientRect().height<u.getBoundingClientRect().height?a:u);r.value[+t.dataset.index].push(e),await C(e+1)}async function m(e=!1){if(r.value.length===x()&&!e){p("redrawSkip");return}r.value=k(x());const l=h==null?void 0:h.value,t=l?l.scrollTop:window.scrollY;await C(0),l?l.scrollBy({top:t-l.scrollTop}):window.scrollTo({top:t}),p("redraw")}const v=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>m());return F(()=>{m(),v==null||v.observe(i.value)}),O(()=>v==null?void 0:v.unobserve(i.value)),b([o,g],()=>m(!0)),b([y,s],()=>m()),(e,l)=>(c(),d("div",{ref_key:"wall",ref:i,class:"masonry-wall",style:T({display:"flex",gap:`${f(s)}px`})},[(c(!0),d(R,null,S(r.value,(t,u)=>(c(),d("div",{key:u,class:"masonry-column","data-index":u,style:T({display:"flex","flex-basis":"0px","flex-direction":"column","flex-grow":1,gap:`${f(s)}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(c(!0),d(R,null,S(t,a=>(c(),d("div",{key:a,class:"masonry-item"},[W(e.$slots,"default",{item:f(o)[a],index:a},()=>[_($(f(o)[a]),1)])]))),128))],12,L))),128))],4))}}),N=(()=>{const n=U;return n.install=p=>{p.component("MasonryWall",n)},n})();export{N as U};
